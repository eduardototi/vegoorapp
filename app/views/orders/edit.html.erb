<div class="container">
  <div class="container-form">
    <div class="order-number">
      Ordem de Serviço número: <%= @order.id %>
    </div>
    <div class="order-date">
      Data: <%= @order.created_at.strftime("%d/%m/%Y") %>
    </div>
    <div class="order-date">
      Data da última alteração: <%= @order.updated_at.strftime("%d/%m/%Y") %>
    </div>
  <%= simple_form_for(@order) do |f| %>
    <div class="product-new text-center">Nova Ordem de Serviço:</div>
    <div class="form-inputs">
      <%= f.input :description, label: "Descrição" %>
      <%= f.input :staff_id, collection: Staff.all.map { |staff| [staff.first_name, staff.id ] }, label: "Responsável Técnico:" %>
      <%= f.input :client_id, collection: Client.all.map { |client| [client.razao_social, client.id ] }, label: "Cliente:" %>
      <%= f.input :location, label: "Local de execução" %>
      <% if @order.orderservices.count > 0 %>
        <p>Serviços desta ordem: </p>
        <% @order.orderservices.each do |orderservice| %>
          <%= orderservice.service.title %>
          <% if orderservice.status %>
            <p>Serviço concluído</p>
          <% else %>
            <p>Serviço não concluído</p>
          <% end %>
        <% end %>
      <% end %>
      <%= f.simple_fields_for :orderservice do |ff| %>
        <%= ff.input :service_id, multiple: true, collection: Service.all.map { |service| [service.title, service.id] }, label: "Novo Serviço:" %>
        <%= ff.button :submit, "Salvar" %>
      <% end %>
      <%= f.simple_fields_for :orderequipment do |eq| %>
        <%= eq.input :equipment_id, collection: Equipment.all.map { |equipment| [equipment.name, equipment.id] }, label: "Equipamentos" %>
      <% end %>
    </div>
    <div class="form-actions text-center">
      <%= f.button :submit, "Enviar" %>
    </div>
  <% end %>
  </div>
</div>
