<div class="container">
  <div class="container-form">
    <div class="order-number">
      <%= image_tag 'sf6.jpg', width: '100px' %>
      Ordem de Serviço SF6: <%#= Order.last.id + 1 %>
    </div>
    <div class="order-date">
      Data: <%= Date.today.strftime("%d/%m/%Y") %>
    </div>
    <%= simple_form_for(@sf6_order) do |f| %>
      <div class="text-center">
        <h6>Nova Ordem de Serviço:</h6>
      </div>
      <div class="form-inputs">
        <div class="new">
          <p>
            <%= f.check_box :field %>
            <%= f.label "Serviço de campo" %>
          </p>
          <p>
            <%= f.check_box :laboratory %>
            <%= f.label "Serviço de Laboratório" %>
          </p>
        </div>
        <%= f.input :description, label: "Descrição:" %>
        <%= f.input :user_id, collection: User.where(role: "Técnico").map { |user| ["#{user.first_name} #{user.last_name}", user.id ] }, label: "Responsável Técnico:" %>
        <%= f.input :client_id, collection: Client.all.map { |client| [client.razao_social, client.id ] }, label: "Cliente:" %>
        <%= f.input :contact_id, collection: User.where(role: 'Cliente').map { |user| ["#{user.first_name} #{user.last_name}", user.id ]}, label: "Contato Cliente:" %>
        <%= f.input :service_location, label: "Local de execução:" %>

          <button type="button" class="btn btn-primary w-100" data-toggle="modal" data-target="#exampleModal" >
            Adicionar Serviços
          </button>

          <!-- Modal -->
          <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Adicionar Serviços</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <%= f.simple_fields_for :sf6_orderservices do |service| %>
                    <%= render 'sf6_orderservice_fields', :f => service %>
                  <% end %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Salvar</button>
                  <%= link_to_add_association 'Adicionar Serviço', f, :sf6_orderservices, class: 'btn btn-primary d-block'%>
                </div>
              </div>
            </div>
          </div>

          <%= f.input :comments, label: "Observações" %>

          <button type="button" class="btn btn-primary w-100" data-toggle="modal" data-target="#exampleModal2"  >
            Adicionar Equipamentos
          </button>

          <!-- Modal -->
          <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Adicionar Equipamentos</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <%= f.simple_fields_for :sf6_orderutensils do |utensil| %>
                    <%= render 'sf6_orderutensil_fields', :f => utensil %>
                  <% end %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Salvar</button>
                  <%= link_to_add_association 'Adicionar Equipamento', f, :sf6_orderutensils, class: 'btn btn-primary d-block' %>
                </div>
              </div>
            </div>
          </div>


          <button type="button" class="btn btn-primary w-100 mt-3" data-toggle="modal" data-target="#exampleModal3"  >
            Selecionar EPI's
          </button>

          <!-- Modal -->
          <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Selecionar EPI's</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <%= f.simple_fields_for :epi_sf6orders do |epi| %>
                    <%= render 'epi_sf6order_fields', :f => epi %>
                  <% end %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Salvar</button>
                  <%= link_to_add_association 'Selecionar Epis', f, :epi_sf6orders, class: 'btn btn-primary d-block' %>
                </div>
              </div>
            </div>
          </div>
        </div>
      <div class="form-actions text-center">
        <%= f.button :submit, "Salvar", class: 'btn btn-primary mt-3' %>
      </div>
    <% end %>
  </div>
</div>
